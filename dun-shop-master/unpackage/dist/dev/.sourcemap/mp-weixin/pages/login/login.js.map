{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../HbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<!-- 免密登录页 -->\n<template>\n\t<view class=\"uni-content\">\n\t\t<!-- 顶部文字 -->\n\t\t<text class=\"title\">请选择登录方式</text>\n\t\t<!-- 快捷登录框 当url带参数时有效 -->\n\t\t<template>\n\t\t\t<text class=\"tip\">将根据第三方账号服务平台的授权范围获取你的信息</text>\n\t\t\t<view class=\"login-logo\">\n\t\t\t\t<image :src=\"avatar\"></image>\n\t\t\t\t<text>{{name}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"quickLogin\">\n\t\t\t\t<image @click=\"login\" src=\"/static/weixin.png\" mode=\"widthFix\" class=\"quickLoginBtn\"></image>\n\t\t\t</view>\n\t\t</template>\n\t\t<!-- 固定定位的快捷登录按钮 -->\n\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref\n\t} from 'vue'\n\timport {\n\t\tgetSessionIdLogin\n\t} from '../../api/api'\n\n\tconst avatar = ref(\"\")\n\tconst name = ref(\"\")\n\n\tconst login = () => {\n\t\tuni.login({\n\t\t\t\"provider\": \"weixin\",\n\t\t\t\"onlyAuthorize\": true, // 微信登录仅请求授权认证\n\t\t\tsuccess: async function(event) {\n\t\t\t\tconst {\n\t\t\t\t\tcode\n\t\t\t\t} = event\n\n\t\t\t\t// let res = await getSessionIdLogin({\n\t\t\t\t// \tcode\n\t\t\t\t// })\n\t\t\t\t// console.log(res);\n\n\t\t\t\tuni.getUserInfo({\n\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\tsuccess: function(infoRes) {\n\t\t\t\t\t\tconsole.log(infoRes.userInfo);\n\t\t\t\t\t\tavatar.value = infoRes.userInfo.avatarUrl\n\t\t\t\t\t\tname.value = infoRes.userInfo.nickName\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//客户端成功获取授权临时票据（code）,向业务服务器发起登录请求。\n\t\t\t\t// uni.request({\n\t\t\t\t// \turl: 'http://www.dundunteam.com:8080/user/getSessionId',\n\t\t\t\t// \tmethod: \"GET\",\n\t\t\t\t// \tdata: {\n\t\t\t\t// \t\tcode: event.code\n\t\t\t\t// \t},\n\t\t\t\t// \tsuccess: (res) => {\n\t\t\t\t// \t\t//获得token完成登录\n\t\t\t\t// \t\tconsole.log(res.data);\n\t\t\t\t// \t\t// uni.setStorageSync('token', res.token)\n\t\t\t\t// \t}\n\t\t\t\t// });\n\t\t\t},\n\t\t\tfail: function(err) {\n\t\t\t\t// 登录授权失败\n\t\t\t\t// err.code是错误码\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: err.data,\n\t\t\t\t\ticon: \"error\"\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.uni-content {\n\t\tpadding: 0 60rpx;\n\t}\n\n\t.login-logo {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin: auto;\n\t\talign-items: center;\n\n\t\t& image {\n\t\t\twidth: 100rpx;\n\t\t\theight: 100rpx;\n\t\t}\n\n\t\t& text {\n\t\t\tfont-size: 30rpx;\n\t\t}\n\t}\n\n\t.title {\n\t\tpadding: 18px 0;\n\t\tfont-weight: 800;\n\t\tflex-direction: column;\n\t}\n\n\t.tip {\n\t\tcolor: #BDBDC0;\n\t\tfont-size: 11px;\n\t\tmargin: 6px 0;\n\t}\n\n\t.input-box {\n\t\theight: 44px;\n\t\tbackground-color: #F8F8F8 !important;\n\t\tborder-radius: 0;\n\t\tfont-size: 14px;\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex: 1;\n\t}\n\n\n\t.uni-content ::v-deep .uni-forms-item__inner {\n\t\tpadding-bottom: 8px;\n\t}\n\n\t@media screen and (min-width: 690px) {\n\t\t.uni-content {\n\t\t\theight: 350px;\n\t\t}\n\t}\n\n\n\t.uni-content,\n\t.quickLogin {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t/* #endif */\n\t}\n\n\t/* #ifdef MP */\n\t// 解决小程序端开启虚拟节点virtualHost引起的 class = input-box丢失的问题 [详情参考](https://uniapp.dcloud.net.cn/matter.html#%E5%90%84%E5%AE%B6%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6%E4%B8%8D%E5%90%8C-%E5%8F%AF%E8%83%BD%E5%AD%98%E5%9C%A8%E7%9A%84%E5%B9%B3%E5%8F%B0%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98)\n\t.phone-box ::v-deep .uni-easyinput__content,\n\t/* #endif */\n\t.input-box {\n\t\t/* #ifndef APP-NVUE */\n\t\tbox-sizing: border-box;\n\t\t/* #endif */\n\t\tflex: 1;\n\t\tpadding-left: 45px;\n\t\tmargin-bottom: 10px;\n\t\tborder-radius: 0;\n\t}\n\n\t.quickLogin {\n\t\theight: 350px;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.quickLoginBtn {\n\t\tmargin: 20px 0;\n\t\twidth: 450rpx;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\tbox-shadow: none;\n\t\t/* #ifndef APP-NVUE */\n\t\tmax-width: 230px;\n\t\t/* #endif */\n\t\theight: 82rpx;\n\t}\n\n\t.tip {\n\t\tmargin-top: -15px;\n\t\tmargin-bottom: 20px;\n\t}\n\n\t@media screen and (min-width: 690px) {\n\t\t.quickLogin {\n\t\t\theight: auto;\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'E:/桌面/dun-shop-master/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni"],"mappings":";;;;;;;;;;;AA6BC,UAAM,SAASA,cAAG,IAAC,EAAE;AACrB,UAAM,OAAOA,cAAG,IAAC,EAAE;AAEnB,UAAM,QAAQ,MAAM;AACnBC,oBAAAA,MAAI,MAAM;AAAA,QACT,YAAY;AAAA,QACZ,iBAAiB;AAAA;AAAA,QACjB,SAAS,eAAe,OAAO;AAU9BA,wBAAAA,MAAI,YAAY;AAAA,YACf,UAAU;AAAA,YACV,SAAS,SAAS,SAAS;AAC1BA,4BAAY,MAAA,MAAA,OAAA,+BAAA,QAAQ,QAAQ;AAC5B,qBAAO,QAAQ,QAAQ,SAAS;AAChC,mBAAK,QAAQ,QAAQ,SAAS;AAAA,YAC9B;AAAA,UACN,CAAK;AAAA,QAcD;AAAA,QACD,MAAM,SAAS,KAAK;AAGnBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI;AAAA,YACX,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;AC5EF,GAAG,WAAW,eAAe;"}