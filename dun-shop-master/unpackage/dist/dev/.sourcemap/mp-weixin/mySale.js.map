{"version":3,"file":"mySale.js","sources":["pages/mySale/mySale.vue"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<scroll-view class=\"scrollView\" scroll-y=\"true\" :show-scrollbar=\"false\" scroll-with-animation=\"true\">\n\t\t\t<view class=\"gridSale\">\n\t\t\t\t<view class=\"gridDetail\">\n\t\t\t\t\t<ListItem v-for=\"(item,id) in listData\" :key=\"id\" :popSelect=\"item.checked\" :noNaviEle=\"true\"\n\t\t\t\t\t\t@tap=\"selectTap(item)\" @longpress=\"navigato\">\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<ListItem :isAdd=\"true\"></ListItem>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"bottomLine\">\n\t\t\t\t<text class=\"bottomText\">没有更多数据</text>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t<uni-popup ref=\"popup\" type=\"bottom\" background-color=\"#fff\" :is-mask-click=\"false\"\n\t\t\tbackgroundColor=\"rgba(247, 247, 247, 0.3)\">\n\t\t\t<view class=\"AllandCancel\">\n\t\t\t\t<view class=\"all\">\n\t\t\t\t\t<checkbox-group>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<checkbox :checked=\"allSelectStatus\" @click=\"allSelect\" />\n\t\t\t\t\t\t\t全选<text>({{selectData.length}}/{{listData.length}})</text>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</checkbox-group>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cancel\">\n\t\t\t\t\t<button type=\"default\" size=\"default\" @click=\"pCancel\">取消</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"popGrid\">\n\t\t\t\t<view class=\"popGridItem1\">\n\t\t\t\t\t<image src=\"/static/logo.png\" mode=\"\"></image>\n\t\t\t\t\t<text>改价</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"popGridItem2\">\n\t\t\t\t\t<image src=\"/static/logo.png\" mode=\"\"></image>\n\t\t\t\t\t<text>下架</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tonMounted,\n\t\tref,\n\t\twatch\n\t} from 'vue';\n\timport ListItem from '../../components/listItem.vue';\n\n\tconst popup = ref(null)\n\tconst listItem = ref(null)\n\tconst popSelectStatus = ref(false)\n\tconst allSelectStatus = ref(false)\n\tconst selectData = ref([])\n\tconst listData = ref([{\n\t\tid: 1,\n\t\tchecked: false\n\t}, {\n\t\tid: 2,\n\t\tchecked: false\n\t}, {\n\t\tid: 3,\n\t\tchecked: false\n\t}])\n\n\tconst navigato = () => {\n\t\tuni.navigateTo({\n\t\t\turl: \"/pages/itemDetail/itemDetail\"\n\t\t})\n\t}\n\n\t//检测全选状态\n\twatch(selectData.value, (newValue) => {\n\t\tif (newValue.length == listData.value.length) {\n\t\t\tallSelectStatus.value = true\n\t\t} else {\n\t\t\tallSelectStatus.value = false\n\t\t}\n\t})\n\n\tconst selectTap = (item) => {\n\t\tif (selectData.value.length == 0) { //避免重复打开关闭弹窗\n\t\t\tpopSelectStatus.value = true\n\t\t\tpopup.value.open()\n\t\t\tpopup.value.closeMask()\n\t\t\tuni.hideTabBar({\n\t\t\t\tanimation: true\n\t\t\t});\n\t\t}\n\t\t//勾选状态\n\t\tif (item.checked) {\n\t\t\titem.checked = false\n\t\t\tselectData.value.pop(item)\n\t\t} else {\n\t\t\titem.checked = true\n\t\t\tselectData.value.push(item)\n\t\t}\n\t\t//没有选择则取消\n\t\tif (selectData.value.length == 0) {\n\t\t\tpCancel()\n\t\t}\n\n\t}\n\tconst pCancel = () => {\n\t\tpopSelectStatus.value = false\n\t\tpopup.value.close()\n\t\tsetTimeout(() => {\n\t\t\tuni.showTabBar({\n\t\t\t\tanimation: true\n\t\t\t});\n\t\t}, 200)\n\t\tlistData.value.forEach((item) => {\n\t\t\titem.checked = false\n\t\t})\n\t\tselectData.value.length = 0\n\n\t}\n\tconst allSelect = () => {\n\t\tif (allSelectStatus.value) {\n\t\t\tallSelectStatus.value = false\n\t\t\tpCancel()\n\t\t} else {\n\t\t\tallSelectStatus.value = true\n\t\t\tlistData.value.forEach((item) => {\n\t\t\t\tif (selectData.value.includes(item)) {\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\t\t\t\t\titem.checked = true\n\t\t\t\t\tselectData.value.push(item)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.container {\n\t\t.scrollView {\n\t\t\theight: 100vh;\n\n\t\t\t::-webkit-scrollbar {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.gridSale {\n\t\t\t\tmargin-top: 15rpx;\n\n\t\t\t\t.gridDetail {\n\t\t\t\t\tpadding: 30rpx;\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t\t\t\tgap: 15px;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t.bottomLine {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 120rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\n\t\t\t\t.bottomText {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 80rpx;\n\t\t\t\t\ttext-align: center;\n\n\t\t\t\t}\n\n\t\t\t\tpadding-bottom: 20rpx;\n\t\t\t}\n\n\t\t}\n\n\t\t.AllandCancel {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tpadding: 10rpx;\n\n\t\t\t.cancel {\n\t\t\t\twidth: 100rpx;\n\t\t\t\theight: 50rpx;\n\n\t\t\t\t& button {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t}\n\n\t\t.popGrid {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-around;\n\n\t\t\t& view {\n\t\t\t\twidth: 120rpx;\n\t\t\t\theight: 150rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\ttext-align: center;\n\n\t\t\t\timage {\n\t\t\t\t\twidth: 120rpx;\n\t\t\t\t\theight: 120rpx;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\n\n\n\t}\n</style>"],"names":["ref","uni","watch"],"mappings":";;;;;;;;;;;AAkDC,MAAM,WAAW,MAAW;;;;AAE5B,UAAM,QAAQA,cAAG,IAAC,IAAI;AACLA,kBAAAA,IAAI,IAAI;AACzB,UAAM,kBAAkBA,cAAG,IAAC,KAAK;AACjC,UAAM,kBAAkBA,cAAG,IAAC,KAAK;AACjC,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,WAAWA,cAAAA,IAAI,CAAC;AAAA,MACrB,IAAI;AAAA,MACJ,SAAS;AAAA,IACX,GAAI;AAAA,MACF,IAAI;AAAA,MACJ,SAAS;AAAA,IACX,GAAI;AAAA,MACF,IAAI;AAAA,MACJ,SAAS;AAAA,IACX,CAAE,CAAC;AAEF,UAAM,WAAW,MAAM;AACtBC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAGDC,kBAAAA,MAAM,WAAW,OAAO,CAAC,aAAa;AACrC,UAAI,SAAS,UAAU,SAAS,MAAM,QAAQ;AAC7C,wBAAgB,QAAQ;AAAA,MAC3B,OAAS;AACN,wBAAgB,QAAQ;AAAA,MACxB;AAAA,IACH,CAAE;AAED,UAAM,YAAY,CAAC,SAAS;AAC3B,UAAI,WAAW,MAAM,UAAU,GAAG;AACjC,wBAAgB,QAAQ;AACxB,cAAM,MAAM,KAAM;AAClB,cAAM,MAAM,UAAW;AACvBD,sBAAAA,MAAI,WAAW;AAAA,UACd,WAAW;AAAA,QACf,CAAI;AAAA,MACD;AAED,UAAI,KAAK,SAAS;AACjB,aAAK,UAAU;AACf,mBAAW,MAAM,IAAI,IAAI;AAAA,MAC5B,OAAS;AACN,aAAK,UAAU;AACf,mBAAW,MAAM,KAAK,IAAI;AAAA,MAC1B;AAED,UAAI,WAAW,MAAM,UAAU,GAAG;AACjC,gBAAS;AAAA,MACT;AAAA,IAED;AACD,UAAM,UAAU,MAAM;AACrB,sBAAgB,QAAQ;AACxB,YAAM,MAAM,MAAO;AACnB,iBAAW,MAAM;AAChBA,sBAAAA,MAAI,WAAW;AAAA,UACd,WAAW;AAAA,QACf,CAAI;AAAA,MACD,GAAE,GAAG;AACN,eAAS,MAAM,QAAQ,CAAC,SAAS;AAChC,aAAK,UAAU;AAAA,MAClB,CAAG;AACD,iBAAW,MAAM,SAAS;AAAA,IAE1B;AACD,UAAM,YAAY,MAAM;AACvB,UAAI,gBAAgB,OAAO;AAC1B,wBAAgB,QAAQ;AACxB,gBAAS;AAAA,MACZ,OAAS;AACN,wBAAgB,QAAQ;AACxB,iBAAS,MAAM,QAAQ,CAAC,SAAS;AAChC,cAAI,WAAW,MAAM,SAAS,IAAI,GAAG;AACpC;AAAA,UACL,OAAW;AACN,iBAAK,UAAU;AACf,uBAAW,MAAM,KAAK,IAAI;AAAA,UAC1B;AAAA,QACL,CAAI;AAAA,MACD;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}