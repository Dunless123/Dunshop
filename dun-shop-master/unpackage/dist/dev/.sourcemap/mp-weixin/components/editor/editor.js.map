{"version":3,"file":"editor.js","sources":["components/editor/editor.vue","../../HbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5qGM6Z2iL2R1bi1zaG9wLW1hc3Rlci9jb21wb25lbnRzL2VkaXRvci9lZGl0b3IudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"page-body\">\n\t\t\t<view class='wrapper'>\n\t\t\t\t<view class='toolbar' @tap=\"format\" style=\"height: 120px;overflow-y: auto;\">\n\t\t\t\t\t<view :class=\"formats.bold ? 'ql-active' : ''\" class=\"iconfont icon-zitijiacu\" data-name=\"bold\">\n\t\t\t\t\t</view>\n\t\t\t\t\t<view :class=\"formats.italic ? 'ql-active' : ''\" class=\"iconfont icon-zitixieti\" data-name=\"italic\">\n\t\t\t\t\t</view>\n\t\t\t\t\t<view :class=\"formats.underline ? 'ql-active' : ''\" class=\"iconfont icon-zitixiahuaxian\"\n\t\t\t\t\t\tdata-name=\"underline\"></view>\n\t\t\t\t\t<view :class=\"formats.strike ? 'ql-active' : ''\" class=\"iconfont icon-zitishanchuxian\"\n\t\t\t\t\t\tdata-name=\"strike\"></view>\n\t\t\t\t\t<view :class=\"formats.align === 'center' ? 'ql-active' : ''\" class=\"iconfont icon-juzhongduiqi\"\n\t\t\t\t\t\tdata-name=\"align\" data-value=\"center\"></view>\n\t\t\t\t\t<view :class=\"formats.align === 'right' ? 'ql-active' : ''\" class=\"iconfont icon-youduiqi\"\n\t\t\t\t\t\tdata-name=\"align\" data-value=\"right\"></view>\n\t\t\t\t\t<view :class=\"formats.align === 'justify' ? 'ql-active' : ''\" class=\"iconfont icon-zuoyouduiqi\"\n\t\t\t\t\t\tdata-name=\"align\" data-value=\"justify\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-clearedformat\" @tap=\"removeFormat\"></view>\n\t\t\t\t\t<view :class=\"formats.color === '#0000ff' ? 'ql-active' : ''\" class=\"iconfont icon-text_color\"\n\t\t\t\t\t\tdata-name=\"color\" data-value=\"#0000ff\"></view>\n\t\t\t\t\t<view :class=\"formats.backgroundColor === '#00ff00' ? 'ql-active' : ''\"\n\t\t\t\t\t\tclass=\"iconfont icon-fontbgcolor\" data-name=\"backgroundColor\" data-value=\"#00ff00\">\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"iconfont icon-date\" @tap=\"insertDate\"></view>\n\t\t\t\t\t<view class=\"iconfont icon--checklist\" data-name=\"list\" data-value=\"check\"></view>\n\t\t\t\t\t<view :class=\"formats.list === 'ordered' ? 'ql-active' : ''\" class=\"iconfont icon-youxupailie\"\n\t\t\t\t\t\tdata-name=\"list\" data-value=\"ordered\"></view>\n\t\t\t\t\t<view :class=\"formats.list === 'bullet' ? 'ql-active' : ''\" class=\"iconfont icon-wuxupailie\"\n\t\t\t\t\t\tdata-name=\"list\" data-value=\"bullet\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-undo\" @tap=\"undo\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-redo\" @tap=\"redo\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-outdent\" data-name=\"indent\" data-value=\"-1\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-indent\" data-name=\"indent\" data-value=\"+1\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-fengexian\" @tap=\"insertDivider\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-charutupian\" @tap=\"insertImage\"></view>\n\t\t\t\t\t<view :class=\"formats.header === 1 ? 'ql-active' : ''\" class=\"iconfont icon-format-header-1\"\n\t\t\t\t\t\tdata-name=\"header\" :data-value=\"1\"></view>\n\t\t\t\t\t<view :class=\"formats.script === 'sub' ? 'ql-active' : ''\" class=\"iconfont icon-zitixiabiao\"\n\t\t\t\t\t\tdata-name=\"script\" data-value=\"sub\"></view>\n\t\t\t\t\t<view :class=\"formats.script === 'super' ? 'ql-active' : ''\" class=\"iconfont icon-zitishangbiao\"\n\t\t\t\t\t\tdata-name=\"script\" data-value=\"super\"></view>\n\t\t\t\t\t<view class=\"iconfont icon-shanchu\" @tap=\"clear\"></view>\n\t\t\t\t\t<view :class=\"formats.direction === 'rtl' ? 'ql-active' : ''\" class=\"iconfont icon-direction-rtl\"\n\t\t\t\t\t\tdata-name=\"direction\" data-value=\"rtl\"></view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"editor-wrapper\">\n\t\t\t\t\t<editor id=\"editor\" class=\"ql-container\" placeholder=\"开始输入...\" show-img-size show-img-toolbar\n\t\t\t\t\t\tshow-img-resize @statuschange=\"onStatusChange\" :read-only=\"readOnly\" @ready=\"onEditorReady\">\n\t\t\t\t\t</editor>\n\t\t\t\t</view>\n\t\t\t\t<button type=\"default\" @tap=\"getContents\">获取内容</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tgetCurrentInstance\n\t} from 'vue'\n\n\tconst readOnly = ref(false)\n\tconst formats = ref({})\n\tconst editorCtx = ref()\n\tconst html = ref()\n\n\tconst instance = getCurrentInstance();\n\tconst query = uni.createSelectorQuery().in(instance.proxy);\n\tquery\n\t\t.select(\"#editor\")\n\t\t.context((res) => {\n\t\t\teditorCtx.value = res.context\n\t\t})\n\t\t.exec();\n\n\tconst readOnlyChange = () => {\n\t\treadOnly.value = !readOnly.value\n\t}\n\tconst onEditorReady = () => {\n\t\t// uni.createSelectorQuery().select('#editor').context((res) => {\n\t\t// \tconsole.log(res);\n\t\t// \teditorCtx.value = res.context\n\t\t// }).exec()\n\n\t}\n\tconst getContents = () => {\n\t\teditorCtx.value.getContents({\n\t\t\tsuccess: (res) => {\n\t\t\t\thtml.value = res.html\n\t\t\t\tuni.setStorageSync(\"html\", html.value)\n\t\t\t}\n\t\t})\n\t}\n\tconst undo = () => {\n\t\teditorCtx.value.undo()\n\t}\n\tconst redo = () => {\n\t\teditorCtx.value.redo()\n\t}\n\tconst format = (e) => {\n\t\tlet {\n\t\t\tname,\n\t\t\tvalue\n\t\t} = e.target.dataset\n\t\tif (!name) return\n\t\t// console.log('format', name, value)\n\t\teditorCtx.value.format(name, value)\n\t}\n\tconst onStatusChange = (e) => {\n\t\tformats.value = e.detail\n\t}\n\tconst insertDivider = () => {\n\t\teditorCtx.value.insertDivider({\n\t\t\tsuccess: function() {\n\t\t\t\tconsole.log('insert divider success')\n\t\t\t}\n\t\t})\n\t}\n\tconst clear = () => {\n\t\tuni.showModal({\n\t\t\ttitle: '清空编辑器',\n\t\t\tcontent: '确定清空编辑器全部内容？',\n\t\t\tsuccess: res => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\teditorCtx.value.clear({\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tconsole.log(\"clear success\")\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\tconst removeFormat = () => {\n\t\teditorCtx.value.removeFormat()\n\t}\n\tconst insertDate = () => {\n\t\tconst date = new Date()\n\t\tconst formatDate = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\n\t\teditorCtx.value.insertText({\n\t\t\ttext: formatDate\n\t\t})\n\t}\n\tconst insertImage = () => {\n\t\tuni.chooseImage({\n\t\t\tcount: 1,\n\t\t\tsuccess: (res) => {\n\t\t\t\teditorCtx.value.insertImage({\n\t\t\t\t\tsrc: res.tempFilePaths[0],\n\t\t\t\t\talt: '图像',\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\tconsole.log('insert image success')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t@import \"./editor-icon.css\";\n\n\t.page-body {\n\t\theight: calc(100vh - var(--window-top) - var(--status-bar-height));\n\t}\n\n\t.wrapper {\n\t\theight: 100%;\n\t}\n\n\t.editor-wrapper {\n\t\theight: calc(100vh - var(--window-top) - var(--status-bar-height) - 140px);\n\t\tbackground: #fff;\n\t}\n\n\t.iconfont {\n\t\tdisplay: inline-block;\n\t\tpadding: 8px 8px;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tcursor: pointer;\n\t\tfont-size: 20px;\n\t}\n\n\t.toolbar {\n\t\tbox-sizing: border-box;\n\t\tborder-bottom: 0;\n\t\tfont-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.ql-container {\n\t\tbox-sizing: border-box;\n\t\tpadding: 12px 15px;\n\t\twidth: 100%;\n\t\tmin-height: 30vh;\n\t\theight: 100%;\n\t\tmargin-top: 20px;\n\t\tfont-size: 16px;\n\t\tline-height: 1.5;\n\t}\n\n\t.ql-active {\n\t\tcolor: #06c;\n\t}\n</style>","import Component from 'E:/桌面/dun-shop-master/components/editor/editor.vue'\nwx.createComponent(Component)"],"names":["ref","getCurrentInstance","uni","res"],"mappings":";;;;;AAgEC,UAAM,WAAWA,cAAG,IAAC,KAAK;AAC1B,UAAM,UAAUA,cAAG,IAAC,EAAE;AACtB,UAAM,YAAYA,cAAAA,IAAK;AACvB,UAAM,OAAOA,cAAAA,IAAK;AAElB,UAAM,WAAWC,cAAAA;AACjB,UAAM,QAAQC,cAAAA,MAAI,oBAAmB,EAAG,GAAG,SAAS,KAAK;AACzD,UACE,OAAO,SAAS,EAChB,QAAQ,CAAC,QAAQ;AACjB,gBAAU,QAAQ,IAAI;AAAA,IACzB,CAAG,EACA;AAKF,UAAM,gBAAgB,MAAM;AAAA,IAM3B;AACD,UAAM,cAAc,MAAM;AACzB,gBAAU,MAAM,YAAY;AAAA,QAC3B,SAAS,CAAC,QAAQ;AACjB,eAAK,QAAQ,IAAI;AACjBA,wBAAAA,MAAI,eAAe,QAAQ,KAAK,KAAK;AAAA,QACrC;AAAA,MACJ,CAAG;AAAA,IACD;AACD,UAAM,OAAO,MAAM;AAClB,gBAAU,MAAM,KAAM;AAAA,IACtB;AACD,UAAM,OAAO,MAAM;AAClB,gBAAU,MAAM,KAAM;AAAA,IACtB;AACD,UAAM,SAAS,CAAC,MAAM;AACrB,UAAI;AAAA,QACH;AAAA,QACA;AAAA,MACH,IAAM,EAAE,OAAO;AACb,UAAI,CAAC;AAAM;AAEX,gBAAU,MAAM,OAAO,MAAM,KAAK;AAAA,IAClC;AACD,UAAM,iBAAiB,CAAC,MAAM;AAC7B,cAAQ,QAAQ,EAAE;AAAA,IAClB;AACD,UAAM,gBAAgB,MAAM;AAC3B,gBAAU,MAAM,cAAc;AAAA,QAC7B,SAAS,WAAW;AACnBA,wBAAAA,MAAA,MAAA,OAAA,uCAAY,wBAAwB;AAAA,QACpC;AAAA,MACJ,CAAG;AAAA,IACD;AACD,UAAM,QAAQ,MAAM;AACnBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,SAAO;AACf,cAAI,IAAI,SAAS;AAChB,sBAAU,MAAM,MAAM;AAAA,cACrB,SAAS,SAASC,MAAK;AACtBD,8BAAAA,MAAA,MAAA,OAAA,uCAAY,eAAe;AAAA,cAC3B;AAAA,YACP,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AACD,UAAM,eAAe,MAAM;AAC1B,gBAAU,MAAM,aAAc;AAAA,IAC9B;AACD,UAAM,aAAa,MAAM;AACxB,YAAM,OAAO,oBAAI,KAAM;AACvB,YAAM,aAAa,GAAG,KAAK,YAAW,CAAE,IAAI,KAAK,SAAQ,IAAK,CAAC,IAAI,KAAK,QAAS,CAAA;AACjF,gBAAU,MAAM,WAAW;AAAA,QAC1B,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AACD,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,SAAS,CAAC,QAAQ;AACjB,oBAAU,MAAM,YAAY;AAAA,YAC3B,KAAK,IAAI,cAAc,CAAC;AAAA,YACxB,KAAK;AAAA,YACL,SAAS,WAAW;AACnBA,4BAAAA,MAAA,MAAA,OAAA,uCAAY,sBAAsB;AAAA,YAClC;AAAA,UACN,CAAK;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9JF,GAAG,gBAAgB,SAAS;"}